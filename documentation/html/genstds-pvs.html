<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Transient Recorder Framework: List of General Standards PVs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Transient Recorder Framework
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">List of General Standards PVs </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This page describes the public PVs specific to the General Standards digitzer driver for models 16AI64SSA and 16AI64SSC.</p>
<p>The public <a class="el" href="framework-pvs.html">framework PVs</a> are automatically supported unless stated otherwise on this page. However this page does includes notes about certain framework PVs regarding driver-specific semantics.</p>
<h2>Device Information</h2>
<p>These PVs contain static information about the device. All of this information is obtained from the vendor’s driver.</p>
<table class="doxtable">
<tr>
<th>PV name, record type </th><th>Description  </th></tr>
<tr>
<td valign="top"><code>GET_FIRMWARE_REVISION</code> (longin) </td><td>The firmware revision as an integer.   </td></tr>
<tr>
<td valign="top"><code>GET_MAX_INPUT_CHANNELS</code> (longin) </td><td>The number of input channels supported by the device.   </td></tr>
<tr>
<td valign="top"><code>GET_MASTER_CLOCK_FREQUENCY</code> (longin) </td><td>The master clock frequency (Hz).   </td></tr>
<tr>
<td valign="top"><code>GET_MAX_SAMPLE_RATE</code> (longin) </td><td>The maximum sample rate supported by the device (Hz).   </td></tr>
<tr>
<td valign="top"><code>GET_BUFFER_SIZE</code> (longin) </td><td>The FIFO buffer size (number of samples) as advertised by the driver. Note, the usable buffer size appears to be one sample less.   </td></tr>
<tr>
<td valign="top"><code>GET_DEVICE_TYPE</code> (mbbi) </td><td><p class="starttd">The type of device.</p>
<p class="endtd">Values: <code>16AI64SSA</code>, <code>16AI64SSC</code>, <code>Unknown</code>.   </p>
</td></tr>
<tr>
<td valign="top"><code>GET_MIN_DIVISOR</code> (longin) </td><td>The minimum permitted divisor value for frequency dividers.   </td></tr>
<tr>
<td valign="top"><code>GET_MAX_DIVISOR</code> (longin) </td><td>The maximum permitted divisor value for frequency dividers.   </td></tr>
</table>
<h2>Device States</h2>
<p>These PVs represent the dynamic states related to burst operation. They are updated at the scan rate defined by the <code>REFRESH_STATES_SCAN</code> template parameter, and in the test IOC by an environment variable of the same name in <code>st.cmd</code>.</p>
<table class="doxtable">
<tr>
<th>PV name, record type </th><th>Description  </th></tr>
<tr>
<td valign="top"><code>GET_BUFFER_OVERFLOW_STATUS</code> (bi) </td><td><p class="starttd">The value of the buffer-overflow flag, i.e. whether there has been a buffer overflow.</p>
<p class="endtd">Values: <code>No Overflow</code>, <code>Overflow</code>.   </p>
</td></tr>
<tr>
<td valign="top"><code>GET_BURST_STATUS</code> (bi) </td><td><p class="starttd">The current burst state, i.e. whether a burst is in progress.</p>
<p class="endtd">Values: <code>Idle</code>, <code>Active</code>.   </p>
</td></tr>
<tr>
<td valign="top"><code>GET_BUFFER_SAMPLES</code> (longin) </td><td>The number of samples in the FIFO sample buffer.   </td></tr>
</table>
<h2>AUX-IO Settings</h2>
<p>These PVs are used for configuring the AUX-IO lines of the board. Settings written into the <code>set</code> records are applied to the device immediately.</p>
<p>The <code>get</code> records contain the current value, and must not be written. Each <code>set</code> record has a forward link to update the corresponding <code>get</code> record.</p>
<table class="doxtable">
<tr>
<th>PV name, record type </th><th>Description  </th></tr>
<tr>
<td valign="top"><code>SET_AUX_LINE_&lt;N&gt;_MODE</code> (mbbo)<br />
&lt;N&gt;=0,1,2,3 </td><td valign="top">Write to set the mode of an AUX-IO line (<code>Inactive</code>, <code>Active Input</code>, <code>Active Output</code>).   </td></tr>
<tr>
<td valign="top"><code>GET_AUX_LINE_&lt;N&gt;_MODE</code> (mbbi) </td><td>The current mode of an AUX-IO line (values as above).   </td></tr>
<tr>
<td valign="top"><code>SET_AUX_INVERT_IN</code> (bo) </td><td>Write to set whether AUX-IO inputs are inverted (<code>Disabled</code>, <code>Enabled</code>).   </td></tr>
<tr>
<td valign="top"><code>GET_AUX_INVERT_IN</code> (bi) </td><td>The current AUX-IO inputs inversion mode (values as above).   </td></tr>
<tr>
<td valign="top"><code>SET_AUX_INVERT_OUT</code> (bo) </td><td>Write to set whether AUX-IO outputs are inverted (<code>Disabled</code>, <code>Enabled</code>).   </td></tr>
<tr>
<td valign="top"><code>GET_AUX_INVERT_OUT</code> (bi) </td><td>The current AUX-IO outputs inversion mode (values as above).   </td></tr>
<tr>
<td valign="top"><code>SET_AUX_NOISE_SUPPRESSION</code> (bo) </td><td>Write to set whether noise suppression for AUX-IO inputs is enabled (<code>Disabled</code>, <code>Enabled</code>).   </td></tr>
<tr>
<td valign="top"><code>GET_AUX_NOISE_SUPPRESSION</code> (bi) </td><td>The current value of the AUX-IO noise suppression setting (values as above).   </td></tr>
</table>
<h2>Desired Settings for Arming</h2>
<p>These PVs should be set to the desired settings before an arm request is issued. Their values are captured at the start of arming.</p>
<p>The hardware does not support pre-samples, therefore the PV <code>numberPPS</code> (provided by the framework) must be left at the default value zero.</p>
<table class="doxtable">
<tr>
<th>PV name, record type </th><th>Description  </th></tr>
<tr>
<td valign="top"><code>DESIRED_INPUT_MODE</code> (mbbo) </td><td>The input mode (“Single-ended”, “Pseudo-Differential”, “Full-Differential”, “Zero Test Voltage”, “Reference Voltage”).   </td></tr>
<tr>
<td valign="top"><code>DESIRED_CHANNEL_ACTIVE_RANGE</code> (mbbo) </td><td><p class="starttd">The channel range (“Single”, “Channels 0-1”, “Channels 0-3”, “Channels 0-7”, “Channels 0-15”, “Channels 0-31”, “Channels 0-63”, “Channel Range”).</p>
<p class="endtd">In case of “Single” and “Channel Range”, additional PVs define which channel or channel range is used.   </p>
</td></tr>
<tr>
<td valign="top"><code>DESIRED_CHANNEL_SINGLE</code> (longout) </td><td><p class="starttd">The channel index to use for single channel mode (otherwise irrelevant).</p>
<p class="endtd">In pseudo-differential mode, this must not be zero. In full-differential mode, this must be even.   </p>
</td></tr>
<tr>
<td valign="top"><code>DESIRED_CHANNEL_RANGE_FIRST</code> (longout) </td><td><p class="starttd">The first channel for channel range mode (otherwise irrelevant).</p>
<p class="endtd">In pseudo-differential mode, this must not be zero. In full-differential mode, this must be even.   </p>
</td></tr>
<tr>
<td valign="top"><code>DESIRED_CHANNEL_RANGE_LAST</code> (longout) </td><td><p class="starttd">The last channel for channel range mode (otherwise irrelevant).</p>
<p class="endtd">This must be greater than the first channel. In full-differential mode, this must be odd.   </p>
</td></tr>
<tr>
<td valign="top"><code>DESIRED_VOLTAGE_RANGE</code> (mbbo) </td><td>The input voltage range (“+-2.5 V”, “0-5 V”, “+-5 V”, “0-10 V”, “+-10 V”).   </td></tr>
<tr>
<td valign="top"><code>clock</code> (mbbo) </td><td><p class="starttd">The desired sample clock source or rate. Supported choices are:</p>
<ul>
<li>“Custom Frequency” (<code>CUSTOM_SAMPLE_RATE</code> applies),</li>
<li>“External Trigger” (external clock),</li>
<li>14 predefined sample rate values (see database, these can easily be changed).</li>
</ul>
<p class="endtd">This PV and <code>CUSTOM_SAMPLE_RATE</code> are considered inputs for clock calculation, and therefore define the value of the PV <code>ACHIEVABLE_SAMPLE_RATE</code> (provided by the framework). If external clock is selected, then <code>ACHIEVABLE_SAMPLE_RATE</code> will be calculated as <code>NAN</code>.   </p>
</td></tr>
<tr>
<td valign="top"><code>CUSTOM_SAMPLE_RATE</code> (ao) </td><td><p class="starttd">The desired sample rate in Hz, when custom frequency is selected.</p>
<p class="endtd">When using an external sample clock (clock is “External Trigger”), this should be set as close as possible to the expected frequency of the external clock. It will be used for autocalibration as part of an arming procedure, for the <code>TIME_DATA</code> waveform, and for sample-rate NDArray attributes.   </p>
</td></tr>
<tr>
<td valign="top"><code>trigger</code> (mbbo) </td><td><p class="starttd">Burst trigger source. Supported choices are:</p>
<ul>
<li>“extTrigger” (external trigger),</li>
<li>“soft” (software trigger).   </li>
</ul>
</td></tr>
<tr>
<td valign="top"><code>BURST_START_TIMESTAMP_ENABLED</code> (bo) </td><td>Whether to enable burst-start timestamps, using the burst-started interrupt (“Off”, “On”).   </td></tr>
<tr>
<td valign="top"><code>IO_MODE_DMDMA_ENABLED</code> (bo) </td><td>Whether to enable Demand-Mode DMA (“Off”, “On”).   </td></tr>
</table>
<h2>Current Armed Settings</h2>
<p>With regard to the possible values and meaning of these PVs, the text in the section of the same name in <a class="el" href="framework-pvs.html">framework PVs</a> applies.</p>
<table class="doxtable">
<tr>
<th>PV name, record type </th><th>Description  </th></tr>
<tr>
<td valign="top"><code>GET_ARMED_INPUT_MODE</code> (mbbi) </td><td>Current armed input mode.   </td></tr>
<tr>
<td valign="top"><code>GET_ARMED_CHANNEL_ACTIVE_RANGE</code> (mbbi) </td><td>Current armed channel range.   </td></tr>
<tr>
<td valign="top"><code>GET_ARMED_CHANNEL_SINGLE</code> (ai) </td><td>Current armed channel index for single channel mode, <code>NAN</code> if single channel mode is not used.   </td></tr>
<tr>
<td valign="top"><code>GET_ARMED_CHANNEL_RANGE_FIRST</code> (ai) </td><td>Current armed first channel for channel range mode, <code>NAN</code> if channel range mode is not used.   </td></tr>
<tr>
<td valign="top"><code>GET_ARMED_CHANNEL_RANGE_LAST</code> (ai) </td><td>Current armed last channel for channel range mode, <code>NAN</code> if channel range mode is not used.   </td></tr>
<tr>
<td valign="top"><code>GET_ARMED_VOLTAGE_RANGE</code> (mbbi) </td><td>Current armed voltage range.   </td></tr>
<tr>
<td valign="top"><code>get_trigger</code> (mbbi) </td><td>Current armed burst trigger source.   </td></tr>
<tr>
<td valign="top"><code>GET_BURST_START_TIMESTAMP_ENABLED</code> (mbbi) </td><td>Current armed selection for use of burst-started timestamps.   </td></tr>
<tr>
<td valign="top"><code>GET_IO_MODE_DMDMA_ENABLED</code> (mbbi) </td><td>Current armed selection for use of DM-DMA.   </td></tr>
</table>
<h2>Device Requests</h2>
<p>Note that to actually start a request, the value 1 (or the associated string value) must be written to the PV for the request. Writing any other value will have no effect. This was done to accommodate EDM, where buttons will write zero when released.</p>
<table class="doxtable">
<tr>
<th>PV name, record type </th><th>Description  </th></tr>
<tr>
<td valign="top"><code>softTrigger</code> (bo) </td><td><p class="starttd">Write 1 or “softTrigger” to send a software trigger to the device.</p>
<p class="endtd">This only has an effect when the device is armed with software trigger.   </p>
</td></tr>
<tr>
<td valign="top"><code>START_INITIALIZE</code> (bo) </td><td><p class="starttd">Write 1 or “Start” to perform the Initialize operation on the device.</p>
<p class="endtd">The operation is asynchronous and the result will be provided in <code>INITIALIZE_STATUS</code>. If this is requested while Initialize is already running, the request is ignored. If it is requested while the device is not disarmed, it will be rejected (<code>fail</code> status).   </p>
</td></tr>
<tr>
<td valign="top"><code>INITIALIZE_STATUS</code> (mbbi) </td><td><p class="starttd">The state or result of the Initialize operation (empty, <code>running</code>, <code>success</code>, <code>fail</code>).</p>
<p class="endtd">The result clears to the empty value automatically a few seconds after completion. This PV must not be written.   </p>
</td></tr>
</table>
<h2>Acquisition Information</h2>
<p>The driver generates burst IDs as suggested in the description of the <code>BURST_ID</code> PV provided by the framework.</p>
<p>The driver also provides the diagnostic times:</p><ul>
<li><code>GET_BURST_START_TO_BURST_END_TIME</code> (except if armed with burst-timestamps disabled),</li>
<li><code>GET_BURST_END_TO_READ_END_TIME</code> (except if armed with DM-DMA enabled),</li>
<li><code>GET_READ_END_TO_DATA_PROCESSED_TIME</code>.</li>
</ul>
<h2>Acquisition control</h2>
<table class="doxtable">
<tr>
<th>PV name, record type </th><th>Description  </th></tr>
<tr>
<td valign="top"><code>VOLTAGE_DATA_OFFSET</code> (ai) </td><td><p class="starttd">The additional voltage offset applied to the sample data, after initial conversion to voltage according to the input voltage range and input mode.</p>
<p class="endtd">Changes to this PV will be reflected in newly processed bursts. The default is 0.   </p>
</td></tr>
</table>
<h2>Testing PVs</h2>
<p>This section lists PVs which are desired to facilitate testing.</p>
<p>There are several PVs which read back configuration from the hardware. These are updated automatically whenever the arm state changes (<code>arm</code> PV) or the Initialize operation completes, and can also be updated manually by writing to the PV <code>REFRESH_READBACKS</code>.</p>
<table class="doxtable">
<tr>
<th>PV name, record type </th><th>Description  </th></tr>
<tr>
<td valign="top"><code>REFRESH_READBACKS</code> (bo) </td><td>Write one or <code>Refresh</code> to refresh the readbacks listed in this section.   </td></tr>
<tr>
<td valign="top"><code>INPUT_MODE_RBV</code> (mbbi) </td><td>Readback of the input mode (see <code>DESIRED_INPUT_MODE</code>).   </td></tr>
<tr>
<td valign="top"><code>VOLTAGE_RANGE_RBV</code> (mbbi) </td><td>Readback of the voltage range (see <code>DESIRED_VOLTAGE_RANGE</code>).   </td></tr>
<tr>
<td valign="top"><code>CHANNEL_ACTIVE_RANGE_RBV</code> (mbbi) </td><td>Readback of the channel-active-range (see <code>DESIRED_CHANNEL_ACTIVE_RANGE</code>).   </td></tr>
<tr>
<td valign="top"><code>CHANNEL_RANGE_FIRST_RBV</code> (longin) </td><td>Readback of the first channel number (see <code>DESIRED_CHANNEL_RANGE_FIRST</code>).   </td></tr>
<tr>
<td valign="top"><code>CHANNEL_RANGE_LAST_RBV</code> (longin) </td><td>Readback of the last channel number (see <code>DESIRED_CHANNEL_RANGE_LAST</code>).   </td></tr>
<tr>
<td valign="top"><code>CHANNEL_SINGLE_RBV</code> (longin) </td><td>Readback of the single channel number (see <code>DESIRED_CHANNEL_SINGLE</code>).   </td></tr>
<tr>
<td valign="top"><code>CLOCK_SOURCE_RBV</code> (mbbi) </td><td>Readback of the sample clock source setting (<code>Rate-A</code>, <code>Rate-B</code>, <code>External Sync</code>, <code>Software Trigger</code>).   </td></tr>
<tr>
<td valign="top"><code>CALC_DIVISOR_A</code> (longin) </td><td>Calculated divisor of rate generator A corresponding to the desired clock configuration. Zero means this rate generator would not be used.   </td></tr>
<tr>
<td valign="top"><code>CALC_DIVISOR_B</code> (longin) </td><td>Calculated divisor of rate generator B corresponding to the desired clock configuration. Zero means this rate generator would not be used.   </td></tr>
</table>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
